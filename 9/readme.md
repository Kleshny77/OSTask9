# Операционные системы. Задание 9

ФИО: Самсонов Артём Арменович
Группа: БПИ238


## Задание

Разработать клиент-серверное приложение, использующее TCP/IP и реализующее следующие взаимодействия: клиент №1 передает сообщения серверу, который перенаправляет их клиенту №2. В качестве исходных данных задавать: IP-адрес сервера, порт сервера. Эти данные можно задавать либо в командной строке, либо с использованием функций стандартного ввода.
Передаваемое сообщение задается из стандартного ввода в цикле. То есть, можно передать не одно а несколько сообщений от клиента №1 клиенту №2. При передаче сообщения «The End» необходимо завершить работу как клиентов, так и сервера.
Приложение должно функционировать в конфигурациях от одного до трех компьютеров с различными комбинациями размещения клиентов и сервера.

## Решение

Программа реализована с использованием TCP/IP сокетов.

### Сервер

Принимает сообщения от клиента 1 и пересылает их клиенту 2. Управляет подключениями и завершает работу при получении сигнала "The End".

1.  **Создание сокета:** Слушает по указанному IP и порту. Ожидает подключений от двух клиентов.
2.  **Идентификация клиентов:** Принимает от клиентов строку-идентификатор (`client1` или `client2`). Сохраняет сокеты клиентов.
3.  **Перенаправление сообщений:** В цикле получает данные от клиента 1. Пересылает их клиенту 2.
4.  **Завершение работы:** При получении сообщения `The End` закрывает все соединения и завершает работу.

### Клиент 1

Вводит данные и отправляет их на сервер.

1.  **Подключение к серверу:** Устанавливает соединение с сервером по указанному IP и порту. Отправляет идентификатор `client1`.
2.  **Чтение и отправка сообщений:** В цикле считывает строки из стандартного ввода (`stdin`). Отправляет их на сервер.
3.  **Завершение работы:** При вводе `The End` закрывает соединение.

### Клиент 2

Выводит сообщения, полученные от сервера.

1.  **Подключение к серверу:** Устанавливает соединение с сервером по указанному IP и порту. Отправляет идентификатор `client2`.
2.  **Получение сообщений:** В цикле принимает данные от сервера. Выводит их в консоль.
3.  **Завершение работы:** При получении `The End` закрывает соединение.

## Запуск

### Компиляция

Перейдите в директорию `9` в терминале:

```bash
cd 9
```

Скомпилируйте исходные файлы:

```bash
gcc server.c -o server
gcc client1.c -o client1
gcc client2.c -o client2
```

Эти команды создадут исполняемые файлы `server`, `client1` и `client2` в текущей директории.

### Запуск приложения

Откройте **три отдельных окна терминала**. В **каждом** из них перейдите в директорию `9` (`cd 9`).

1.  **Запуск сервера:** В первом терминале выполните команду для запуска сервера, указав IP-адрес и порт (например, `127.0.0.1` и `8081`):

    ```bash
    ./server <SERVER_IP> <SERVER_PORT>
    ```

    Пример:
    ```bash
    ./server 127.0.0.1 8081
    ```

2.  **Запуск Клиента 1:** Во втором терминале запустите клиент 1, подключившись к тому же IP и порту сервера:

    ```bash
    ./client1 <SERVER_IP> <SERVER_PORT>
    ```

    Пример:
    ```bash
    ./client1 127.0.0.1 8081
    ```

3.  **Запуск Клиента 2:** В третьем терминале запустите клиент 2, также подключившись к серверу:

    ```bash
    ./client2 <SERVER_IP> <SERVER_PORT>
    ```

    Пример:
    ```bash
    ./client2 127.0.0.1 8081
    ```

После запуска, Клиент 1 предложит ввод сообщений. Введите текст и нажмите Enter. Сообщения будут перенаправляться на Клиента 2 и отображаться в его терминале. Для завершения работы всех компонентов введите `The End` в терминале Клиента 1.
